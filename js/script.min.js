"use strict";const TABLET_WIDTH_MEDIA_QUERY="(min-width: 768px)";function getPaginationButtonCreator(e="Слайд"){return(t,n)=>`\n    <button class='${n}' type='button'>\n      <span class='visually-hidden'>${e} ${t+1}.</span>\n    </button>\n  `}function initBanners(e){const t=e.querySelector(".banners__slider");new Swiper(t,{effect:"fade",fadeEffect:{crossFade:!0},loop:!0,pagination:{el:".banners__slider-pagination",bulletClass:"banners__slider-pagination-button",bulletActiveClass:"banners__slider-pagination-button--current",renderBullet:getPaginationButtonCreator(),clickable:!0}})}function initDropdown(e){function t(t){(t.target.closest(".dropdown")!==e||t.target.matches(".dropdown__list-wrapper"))&&(t.preventDefault(),n())}function n(){e.classList.remove("dropdown--open"),document.removeEventListener("click",t)}e.addEventListener("click",(r=>{if(r.target.closest(".dropdown__toggle-button"))e.classList.contains("dropdown--open")?n():(e.classList.add("dropdown--open"),setTimeout((()=>{document.addEventListener("click",t)}),0));else{const t=r.target.closest(".dropdown__item");if(t){const r=t.querySelector(".dropdown__item-button");e.querySelector(".dropdown__toggle-button-text").textContent=r.textContent,n()}}}))}function initLicenses(){const e=document.querySelector(".licenses"),t=e.querySelector(".licenses__slider");new Swiper(t,{slidesPerView:"auto",spaceBetween:16,breakpoints:{1024:{slidesPerView:3,spaceBetween:30}}});const n=e.querySelector(".license-card__users-list");if(!n)return;const r=n.closest(".license-card"),i=n.querySelectorAll(".license-card__users-button"),o=r.querySelector(".license-card__price-wrapper [data-old-price]"),s=r.querySelector(".license-card__price-wrapper [data-price]");n?.addEventListener("click",(e=>{const t=e.target.closest(".license-card__users-button");if(!t)return;i.forEach((e=>e.classList.remove("license-card__users-button--active"))),t.classList.add("license-card__users-button--active");const{price:n,oldPrice:r}=t.dataset;((e,t)=>{e&&s&&(s.textContent=`${Number(e).toLocaleString()} ₽`),t&&o&&(o.textContent=`${Number(t).toLocaleString()} ₽`)})(n,r)}))}function initPageSlider(){const e=["about","capabilities","prices"],t=document.querySelector(".page-slider"),n=document.querySelectorAll(".logo, .site-navigation__link"),r=new Swiper(t,{effect:"fade",fadeEffect:{crossFade:!0},autoHeight:!0,allowTouchMove:!1});n.forEach((t=>{t.addEventListener("click",(t=>{const n=t.currentTarget.getAttribute("href").slice(1),i=e.indexOf(n);r.slideTo(i)}))})),document.addEventListener("DOMContentLoaded",(()=>{const t=window.location.hash.slice(1),n=Math.max(e.indexOf(t),0);r.slideTo(n,0,!1)}))}function initSocials(e){const t=document.querySelector(".page__inner"),n=t.querySelector(".page__content"),r=()=>{tabletWidthMediaQueryList.matches?n.append(e):t.append(e)};r(),tabletWidthMediaQueryList.addEventListener("change",(()=>{r()}))}function initTariffs(){const e=document.querySelector(".tariffs"),t=e.querySelector(".tariffs__slider"),n=e.querySelectorAll(".tariff-card"),r=document.querySelectorAll(".pricing__toggle-button"),i=e.querySelector(".tariffs__button--left"),o=e.querySelector(".tariffs__button--right"),s=e.querySelector(".tariff-card--enterprise"),c=s.querySelectorAll(".tariff-card__prices [data-month-price]"),a=s.querySelector(".tariff-card__prices [data-year-price]"),d=s.querySelector(".dropdown__list");d?.addEventListener("click",(e=>{const t=e.target.closest(".dropdown__item-button");if(!t)return;const{monthPrice:n,yearPrice:r}=t.dataset;((e,t)=>{c.forEach((t=>{e&&(t.textContent=`${Number(e).toLocaleString()} ₽/мес.`)})),a&&t&&(a.textContent=`${Number(t).toLocaleString()} ₽/мес.`)})(n,r)}));const l=e=>{e.isBeginning?(i.classList.add("tariffs__button--hidden"),o.classList.remove("tariffs__button--hidden")):e.isEnd&&(i.classList.remove("tariffs__button--hidden"),o.classList.add("tariffs__button--hidden"))},u=new Swiper(t,{slidesPerView:"auto",spaceBetween:16,breakpoints:{1440:{slidesPerView:4,spaceBetween:16},1920:{slidesPerView:5,spaceBetween:16}},on:{toEdge:()=>{l(u)}}});l(u),i.addEventListener("click",(()=>{u.slideTo(0)})),o.addEventListener("click",(()=>{u.slideTo(4)}));r.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),r.forEach((e=>e.classList.remove("pricing__toggle-button--active"))),e.currentTarget.classList.add("pricing__toggle-button--active");(e=>{n.forEach((t=>{"month"===e?(t.classList.remove("tariff-card--payment-type_year"),t.classList.add("tariff-card--payment-type_month")):(t.classList.add("tariff-card--payment-type_year"),t.classList.remove("tariff-card--payment-type_month"))}))})(e.currentTarget.dataset.type)}))}))}const tabletWidthMediaQueryList=window.matchMedia("(min-width: 768px)");initPageSlider(),initBanners(document.querySelector(".banners")),initSocials(document.querySelector(".socials")),initTariffs(),initLicenses(),document.querySelectorAll(".dropdown").forEach(initDropdown);